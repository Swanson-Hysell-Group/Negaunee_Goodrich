install.packages('tidyverse')
library('ggplot2')
install.packages('rlang')
install.packages('tidyverse')
install.packages('tideyverse')
install.packages('rlang')
install.packages('tidyverse')
library('ggplot2')
install.packages("ggplot2")
install.packages('tidyverse')
library('ggplot2')
library('ggplot2')
install.packages(c("corrplot", "extrafont", "factoextra", "raster", "rgdal", "sf", "sp", "useful"))
install.packages('SDAR')
install.packages('paleoDB')
install.packages('paleobioDB')
library('raster')
library(raster)
library(paleobioDB)
install.packages(raster)
install.packages('raster')
library(raster)
install.packages(c("dplyr", "factoextra", "raster", "rgdal", "sf", "sp"))
install.packages("raster")
install.packages("paleobioDB")
install.packages(c("dplyr", "factoextra", "raster", "rgdal", "sf", "sp"))
install.packages(c("backports", "BH", "boot", "callr", "class", "cli", "clipr", "cluster", "codetools", "colorspace", "crayon", "curl", "DBI", "dbplyr", "digest", "ellipsis", "evaluate", "fansi", "forcats", "fs", "generics", "glue", "haven", "hms", "htmltools", "httr", "jsonlite", "KernSmooth", "knitr", "labeling", "lattice", "lubridate", "magrittr", "markdown", "MASS", "mime", "modelr", "nlme", "nnet", "openssl", "pkgconfig", "plyr", "prettyunits", "processx", "progress", "ps", "purrr", "R6", "Rcpp", "readr", "reprex", "reshape2", "rlang", "rmarkdown", "rpart", "rstudioapi", "rvest", "scales", "selectr", "spatial", "stringi", "survival", "sys", "tidyverse", "tinytex", "utf8", "whisker", "withr", "xfun", "xml2", "yaml"))
install.packages(c("dplyr", "factoextra", "raster", "rgdal", "sf", "sp"))
install.packages(c("backports", "callr", "class", "cluster", "colorspace", "cpp11", "digest", "ellipsis", "fansi", "fs", "glue", "htmltools", "jsonlite", "KernSmooth", "knitr", "lattice", "lubridate", "magrittr", "MASS", "mime", "nlme", "nnet", "openssl", "processx", "ps", "purrr", "Rcpp", "reprex", "reshape2", "rlang", "spatial", "stringi", "survival", "sys", "tinytex", "utf8", "xfun", "xml2"))
as.POSIXct("2016-07-01 01:00:00", tz="UTC")
as.POSIXct("2016-07-01 01:00:00", tz="America/Denver")
install.packages("rgdal")
install.packages("rgdal",repo = 'https://mac.R-project.org')
library(dplyr)
install.packages(dplyr)
install.packages("tidyverse")
install.packages("dplyr")
library(dplyr)
version
update
version
install.packages(dpylr)
install.packages("dpylr")
install.packages("tidyverse")
library(dplyr)
library(dplyr)
install.packages(vctrs)
install.packages("vctrs")
library(dplyr)
q()
setwd("~/Github/Negaunee_Goodrich/data/geochron/iolite")
library(dplyr)
library(IsoplotR)
library(scales)
library(stringr)
library(ggplot2)
library(common)
##### Function for splitting up samples in output table from Iolite and getting into isoplotr format####
splt_data<-function(df,sample,prop){
if(prop==TRUE){
samp<-df%>%
filter(str_detect(X,regex(sample)))%>%
select(c("Final.U238.Pb206_mean","Final.U238.Pb206_prop2SE","Final.Pb207.Pb206_mean",
"Final.Pb207.Pb206_prop2SE","rho.207Pb.206Pb.v.238U.206Pb")) %>%
distinct()%>%
na.omit(samp)
read.data(samp,method='U-Pb',format=2,ierr=2)
}
else{
samp<-df%>%
filter(str_detect(X,regex(sample)))%>%
select(c("Final.U238.Pb206_mean","Final.U238.Pb206_2SE",
"Final.Pb207.Pb206_mean","Final.Pb207.Pb206_2SE","rho.207Pb.206Pb.v.238U.206Pb")) %>%
distinct()%>%
na.omit(samp)
read.data(samp,method='U-Pb',format=2,ierr=2)
}
}
write_dt<-function(df,filepath){
df%>%
select(c("X","Final.U238.Pb206_mean","Final.U238.Pb206_2SE","Final.U238.Pb206_prop2SE","Final.Pb207.Pb206_mean",
"Final.Pb207.Pb206_2SE","Final.Pb207.Pb206_prop2SE","rho.207Pb.206Pb.v.238U.206Pb"))%>%
rename("Spot ID #"="X","238/206"="Final.U238.Pb206_mean","238/206 2SE"="Final.U238.Pb206_2SE",
"238/206 Prop 2SE"="Final.U238.Pb206_prop2SE","207/206"="Final.Pb207.Pb206_mean", "207/206 2SE"="Final.Pb207.Pb206_2SE",
"207/206 Prop 2SE"="Final.Pb207.Pb206_prop2SE", "207/238 Error Corr"="rho.207Pb.206Pb.v.238U.206Pb"
)%>%
write.csv(filepath,col.names = TRUE,row.names = FALSE)
}
# HFO Abs reference values which are taken as the reciprocal for the 238/06
HFO_three_eight_mean=1/0.12216
HFO_three_eight_se=1/0.0021
HFO_seven_six_mean=0.9167
HFO_seven_six_se=0.0061
########### Read in iolite file #############
april_day_01<-read.csv('0424_day1.csv')
april_day_02<-read.csv('0424_day2.csv')
april_day_03<-read.csv('0424_day3.csv')
nov<-read.csv("nov.csv")
jk25_liam<-read.csv("jk25_liam.csv")
shared_cols<-intersect(colnames(april_day_01),colnames(april_day_02))
jk_cols<-intersect(colnames(april_day_02),colnames(nov))
all_data<-rbind(april_day_01[,shared_cols],april_day_02[,shared_cols],april_day_03[,shared_cols])
jk22_01<-splt_data(april_day_01,"JK22",TRUE)
jk22_02<-splt_data(april_day_02,"JK22",TRUE)
jk22_both<-splt_data(all_data,"JK22",TRUE)
jk23_01<-splt_data(april_day_01,"JK23",TRUE)
jk23_02<-splt_data(april_day_02,"JK23",TRUE)
jk23_both<-splt_data(all_data,"JK23",TRUE)
jk25_01<-splt_data(nov,"JK_25_G",TRUE)
jk25_02<-splt_data(april_day_02, "JK25_2",TRUE)
jk25_both<-splt_data(rbind(april_day_02[,jk_cols],nov[,jk_cols]),"JK25",TRUE)
#jk25_both<-splt_data(jk25_liam,"JK25",FALSE)
jk32<-splt_data(april_day_03,"JK32",TRUE)
jk34<-splt_data(april_day_03,"JK34",TRUE)
jk36<-splt_data(april_day_02,"JK36",TRUE)
jk10<-splt_data(april_day_03,"JK10-",TRUE)
jk21<-splt_data(nov,"JK_21_G_Band",TRUE)
jk21_02<-splt_data(april_day_03,"JK21_band",TRUE)
vein<-splt_data(nov,"JK_21_G_Vein",TRUE)
vein_02<-splt_data(april_day_03,"JK21_vein",TRUE)
NF10<-splt_data(april_day_01,"NF10",TRUE)
NF9<-splt_data(april_day_01,"NF9",TRUE)
jk3<-splt_data(april_day_03,"JK3_mph",TRUE)
Fe_grab<-splt_data(nov,"Fe-Grab",TRUE)
jk1<-splt_data(april_day_03,'JK1-',TRUE)
top_list=c("JK1","JK10","JK3_mph")
jk_top<-splt_data(all_data,top_list,TRUE)
combo<-rbind(rbind(april_day_03[,jk_cols],nov[,jk_cols]))
drops <- c("X.1")
combo<-combo[ , !(names(combo) %in% drops)]
jk21_all<-combo%>%
filter(str_detect(X,regex("JK_21_G|JK21_")))%>%
select(c("X","Final.U238.Pb206_mean","Final.U238.Pb206_prop2SE","Final.Pb207.Pb206_mean",
"Final.Pb207.Pb206_prop2SE","rho.207Pb.206Pb.v.238U.206Pb")) %>%
na.omit()
jk21_both<-read.data(jk21_all,method='U-Pb',format=2,ierr=2)
jk21_april<-combo%>%
filter(str_detect(X,regex("JK21_")))%>%
select(c("Final.U238.Pb206_mean","Final.U238.Pb206_prop2SE","Final.Pb207.Pb206_mean",
"Final.Pb207.Pb206_prop2SE","rho.207Pb.206Pb.v.238U.206Pb")) %>%
na.omit()
jk21_april<-read.data(jk21_april,method='U-Pb',format=2,ierr=2)
jk21_nov_input<-combo%>%
filter(str_detect(X,regex("JK_21_G")))%>%
select(c("Final.U238.Pb206_mean","Final.U238.Pb206_prop2SE","Final.Pb207.Pb206_mean",
"Final.Pb207.Pb206_prop2SE","rho.207Pb.206Pb.v.238U.206Pb")) %>%
na.omit()
jk21_nov<-read.data(jk21_nov_input,method='U-Pb',format=2,ierr=2)
####JK 21 Additional Data Wrangling###
# This area of code is to filter out the novemeber data and associate the band and vein textures with a numerical
# value that isoplot can interpret and assign a color using the levels call. Cannot be a string for some reason
jk21_all<-jk21_all%>%
filter(str_detect(X,regex("JK_21_G")))%>%
mutate("levels"=ifelse(str_detect(X,regex("JK_21_G_Band")),1,2))
jk_levels=jk21_all$levels
jk21_nov_input<-jk21_all%>%
select(c("Final.U238.Pb206_mean","Final.U238.Pb206_prop2SE","Final.Pb207.Pb206_mean",
"Final.Pb207.Pb206_prop2SE","rho.207Pb.206Pb.v.238U.206Pb")) %>%
na.omit()
jk21_nov<-read.data(jk21_nov_input,method='U-Pb',format=2,ierr=2)
NF10_pt<-c(7,10,11,17,6,2,45,51,24,56,23,
26,46,25,47,52,50,54,49,20,5,33,21,18,30)
#pdf("../../../figures/geochron/NF10_01.pdf")
concordia(NF10,type=2,tlim=(5000:1200),ellipse.fill = alpha('#de2d26',0.6),ticks = 10,show.numbers = FALSE,
concordia.col = 'black',show.age = 2,oerr=2,hide=NF10_pt,common.Pb = 0,cex.lab=(2),cex.axis=(1.5))
#dev.off()
NF9_pts<-c(14,33,63,62,64,61,74,68,65,
28,66,17,73,43,44,56,51,37,51,50)
#pdf("../../../figures/geochron/NF9_01.pdf")
concordia(NF9,type=2,(5000:1200),ellipse.fill = alpha('#de2d26',0.6),ticks = 10,show.numbers = FALSE,
concordia.col = 'black',show.age = 2,oerr=2,common.Pb = 0,hide=NF9_pts,cex.lab=(2),cex.axis=(1.5))
#dev.off()
concordia(NF9,type=2,(5000:1200),ellipse.fill = alpha('#de2d26',0.6),ticks = 10,show.numbers = FALSE,
concordia.col = 'black',show.age = 2,oerr=2,common.Pb = 0,cex.lab=(2),cex.axis=(1.5))
concordia(NF10,type=2,tlim=(5000:1200),ellipse.fill = alpha('#de2d26',0.6),ticks = 10,show.numbers = FALSE,
concordia.col = 'black',show.age = 2,oerr=2,hide=NF10_pt,common.Pb = 0,cex.lab=(2),cex.axis=(1.5))
